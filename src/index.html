<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/btn.css">
    <link rel="stylesheet" href="styles/tooltip.css">
    <title>City Builder with three js and live server</title>
</head>
<body>
<div id="root-window" class="root-window">
    <div id="game-window" class="game-window">

        <div id='loader' class="loader"></div>

        <div id="pause-overlay" class="pause-overlay">
            <button type="button" id="play-btn" data-action="play" class="toolbar-btn bubbly-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play">
                    <polygon points="6 3 20 12 6 21 6 3"/>
                </svg>
            </button>
        </div>

        <div id="over-overlay" class="over-overlay">
            <div class="over-overlay__text">
                <h1>Vous avez été viré de votre poste</h1>
                <p>En effet vous avez laissé vos citoyens mourir de faim ! Des poursuites ont été engagé contre vous par la cour internationale de justice.</p>
                <p> Certes, en tant que dictateur cela ne vous touche pas beaucoup mais sachez aussi : vous êtes ruiné !</p>
            </div>
            <button type="button" id="play-again-btn" data-action="play-again" class="toolbar-btn bubbly-button">
               Rejouer
            </button>
        </div>

        <section id="toolbar" class="toolbar">

          <button type="button" id="pause-btn" data-action="pause" class="toolbar-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause">
                  <rect x="14" y="4" width="4" height="16" rx="1"/>
                  <rect x="6" y="4" width="4" height="16" rx="1"/>
              </svg>
          </button>

        <button type="button" id="bulldoze-btn" data-toolid="bulldoze" class="toolbar-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eraser">
                <path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/>
                <path d="M22 21H7"/><path d="m5 11 9 9"/>
            </svg>
        </button>
        <button type="button" id="select-btn" data-toolid="select-object" class="toolbar-btn selected">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-mouse-pointer">
                <path d="M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6"/>
                <path d="m12 12 4 10 1.7-4.3L22 16Z"/>
            </svg>
        </button>
        <button type="button" id="residential-btn" class="toolbar-btn" data-group="residential">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home">
                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <polyline points="9 22 9 12 15 12 15 22"/>
            </svg>
        </button>
        <button type="button" id="market-btn" class="toolbar-btn" data-group="markets">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-store"><path d="m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"/><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><path d="M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"/><path d="M2 7h20"/><path d="M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7"/>
            </svg>
        </button>
        <button type="button" id="farm-btn" class="toolbar-btn" data-group="farms">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wheat">
                <path d="M2 22 16 8"/><path d="M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                <path d="M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"/>
                <path d="M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
                <path d="M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
                <path d="M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
            </svg>
        </button>
        <button type="button" id="roads-btn" data-toolid="roads" class="toolbar-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-route">
                <circle cx="6" cy="19" r="3"/><path d="M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15"/>
                <circle cx="18" cy="5" r="3"/>
            </svg>
        </button>
      </section>

        <section class="info-panel-wrapper">
            <div class="delay-ui-wrapper">
                <div class="delay-ui"></div>
            </div>

            <div class="info-panel">
                <section class="info-box">
                    <article class="clock-box">
                  <span class="clock-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock-4"><circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                  </span>
                        <div class="display-time"></div>
                    </article>
                    <article class="delay-box">
                    <span class="delay-icon">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alarm-clock"><circle cx="12" cy="13" r="8"/><path d="M12 9v4l2 2"/><path d="M5 3 2 6"/><path d="m22 6-3-3"/><path d="M6.38 18.7 4 21"/><path d="M17.64 18.67 20 21"/>
                         </svg>
                      </span>
                        <div class="display-delay"></div>
                    </article>
                </section>

                <section class="info-box">
                    <article class="pop-box">
                 <span class="info-box pop-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </span>
                        <div class="display-pop"></div>
                    </article>

                    <article class="dead-box">
                 <span class="dead-icon">
                     <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-skull"><circle cx="9" cy="12" r="1"/><circle cx="15" cy="12" r="1"/>
                         <path d="M8 20v2h8v-2"/>
                        <path d="m12.5 17-.5-1-.5 1h1z"/>
                        <path d="M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20"/>
                    </svg>
                </span>
                        <div class="display-dead"></div>
                    </article>
                </section>


                <article class="info-box food-box">
                 <span class="food-icon">
                   <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-apple">
                    <path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"/>
                    <path d="M10 2c1 .5 2 2 2 5"/>
                   </svg>
                </span>
                    <div class="display-food"></div>
                </article>

                <section class="info-box">
                    <article class="budget-box">
                <span class="budget-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-euro">
                          <path d="M4 10h12"/><path d="M4 14h9"/>
                          <path d="M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2"/>
                        </svg>
                  </span>
                        <div class="display-funds"></div>
                    </article>

                    <article class="debt-box">
                <span class="debt-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-landmark"><line x1="3" x2="21" y1="22" y2="22"/><line x1="6" x2="6" y1="18" y2="11"/><line x1="10" x2="10" y1="18" y2="11"/><line x1="14" x2="14" y1="18" y2="11"/><line x1="18" x2="18" y1="18" y2="11"/><polygon points="12 2 20 7 4 7"/>
                    </svg>
                </span>
                        <div class="display-debt"></div>
                    </article>
                </section>
            </div>
        </section>



        <div id="panel-layout" class="panel-layout">

            <div class="panel-inner-wrapper">
                <div class="panel-close-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-x">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="m15 9-6 6"/>
                        <path d="m9 9 6 6"/>
                    </svg>
                </div>
                <div id="panel-inner" class="panel-inner"></div>
            </div>
      </div>

    </div>
</div>
<script type="module" src="./game.js"></script>
<script type="module">
    import { createGame } from './game.js';
    import { buttonData, toolIds } from './buildings.js';

    const panelLayout = document.getElementById('panel-layout')
    const panelLayoutInner = document.getElementById('panel-inner')
    let selectedControl = document.getElementById('bulldoze-btn');
    const loaderButton = document.getElementById('loader');

    const toolBarButtons = document.querySelectorAll('.toolbar-btn');

    const roadButton = document.getElementById('roads-btn');
    const bullDozeButton = document.getElementById('bulldoze-btn');
    const selectButton = document.getElementById('select-btn');
    const playerButton = document.getElementById('player-btn');
    const housesButton = document.getElementById('residential-btn');
    const farmsButton = document.getElementById('farm-btn');
    const marketButton = document.getElementById('market-btn');

    const panelLayoutCloseBtn = document.querySelector('.panel-layout .panel-close-btn')

    const pauseOverlay = document.querySelector('#pause-overlay');

    const pauseButton = document.getElementById('pause-btn');
    const playButton = document.getElementById('play-btn');
    const replayButton = document.getElementById('play-again-btn');


    playButton.addEventListener('click', () => {
        pauseOverlay.classList.remove('active')
        window.game.play()
    })

    pauseButton.addEventListener('click', () => {
        pauseOverlay.classList.add('active')
        window.game.pause()
    })

    replayButton.addEventListener('click', () => {
        window.game.replay()
    })

    bullDozeButton.addEventListener('click', (e) => {
        setActiveTool(e);
    })

    selectButton.addEventListener('click', (e) => {
        setActiveTool(e);
    })

    roadButton.addEventListener('click', (e) => {
        setActiveTool(e);
    })

    housesButton.addEventListener('click', toggleModal)

    farmsButton.addEventListener('click', toggleModal)

    marketButton.addEventListener('click', toggleModal)

    panelLayoutCloseBtn.addEventListener('click', closeModal)

    window.onload = () => {
       window.game = createGame();
    }

    // Animation panel buttons
    let animateButton = function(e) {

        e.preventDefault;
        //reset animation
        e.target.classList.remove('animate');

        e.target.classList.add('animate');
        setTimeout(function(){
            e.target.classList.remove('animate');
        },700);
    };

    const bubblyButtons = document.getElementsByClassName("bubbly-button");

    for (let i = 0; i < bubblyButtons.length; i++) {
        bubblyButtons[i].addEventListener('click', animateButton, false);
    }
    // END ANIMATION BUTTON
    function getButtonsUnactive() {
        toolBarButtons.forEach(button => {
            button.classList.remove('selected')
        })
    }

    function getButtonsDisabled() {
        toolBarButtons.forEach(button => {
            if(button.classList.contains('disabled')) {
                button.classList.remove('disabled')
            } else {
                button.classList.add('disabled')
            }

        })
    }

    function closeModal() {
        toolBarButtons.forEach(button => {
            if (button.classList.contains('disabled')) {
                button.classList.remove('disabled')
            }
        });
        toolBarButtons.forEach(button => {
            if(button.classList.contains('selected')) {
                button.classList.remove('selected')
            }
        })
        if(panelLayout.classList.contains('active')) {
            panelLayout.classList.remove('active');
        }
    }

    function toggleModal(e) {
        console.log('we click on modal button')
        console.log('button data on arrival', buttonData);
        console.log('tool id on arrival', toolIds);

       switch(e.target.dataset.group) {
          case 'residential':
              getButtonsUnactive()
              getButtonsDisabled()
              e.target.classList.toggle('selected')

              panelLayoutInner.classList.add('loading-objects')
              if(!panelLayout.classList.contains('active')) {
                  loaderButton.classList.add('active');
                  createHousesButtons(buttonData);
                  panelLayout.classList.add('active');
              }

            break;
          case 'farms':
              getButtonsUnactive()
              getButtonsDisabled()
              panelLayoutInner.classList.add('loading-objects')
              if(!panelLayout.classList.contains('active')) {
                  loaderButton.classList.add('active');
                  panelLayout.classList.add('active');
                  e.target.classList.toggle('selected')
                  createFarmsButtons(buttonData);
              }
             break;
           case 'markets':
               getButtonsUnactive()
               getButtonsDisabled()
               panelLayoutInner.classList.add('loading-objects')
               if(!panelLayout.classList.contains('active')) {
                   panelLayout.classList.add('active');
                   e.target.classList.toggle('selected')
                   createMarketsStallsButtons(buttonData)
               }
               break;
          default:
              e.target.classList.toggle('selected')
              panelLayout.classList.remove('active');
             break;
       }
    }

    function createHousesButtons(buttonData) {
        panelLayoutInner.innerHTML = ''
        const houseToolIDs = toolIds.houses || [];
        const svg =  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" className="lucide lucide-home">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>`
        const svgBigHouse = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-castle"><path d="M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z"/><path d="M18 11V4H6v7"/><path d="M15 22v-4a3 3 0 0 0-3-3v0a3 3 0 0 0-3 3v4"/><path d="M22 11V9"/><path d="M2 11V9"/><path d="M6 4V2"/><path d="M18 4V2"/><path d="M10 4V2"/><path d="M14 4V2"/>
                        </svg>`
        let buttonsDuplicate = [];
        buttonData.filter(buttonInfo => houseToolIDs.includes(buttonInfo.tool)).forEach(buttonInfo => {
            if (!buttonsDuplicate.includes(buttonInfo.tool)) {
                buttonsDuplicate.push(buttonInfo.tool);
                if(buttonInfo.tool === 'House-2Story') {
                    makeNewButton(buttonInfo, svgBigHouse)
                } else {
                    makeNewButton(buttonInfo, svg)
                }

            }

        });
    }

    function createMarketsStallsButtons(buttonData) {
        panelLayoutInner.innerHTML = ''
        const marketsToolIDs = toolIds.markets || [];
        console.log('MARKET TOOL IDS', marketsToolIDs);
        const svgCloth =  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shirt">
                    <path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/>
                    </svg>`
        const svgFurniture = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-armchair"><path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"/><path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"/><path d="M5 18v2"/><path d="M19 18v2"/>
                              </svg>`
        let buttonsDuplicate = [];
        buttonData.filter(buttonInfo => marketsToolIDs.includes(buttonInfo.tool)).forEach(buttonInfo => {
            if (!buttonsDuplicate.includes(buttonInfo.tool)) {
                buttonsDuplicate.push(buttonInfo.tool);
                makeNewButton(buttonInfo, svgCloth)
            }
        });
    }

    function createFarmsButtons(buttonData) {
        panelLayoutInner.innerHTML = ''
        const farmToolIDs = toolIds.farms || [];
        console.log(farmToolIDs);
        const svgCarrot = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-carrot">
                        <path d="M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46"/><path d="M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z"/>
                        <path d="M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z"/>
                    </svg>`
        const svgWheat = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.25" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-wheat">
                            <path d="M2 22 16 8"/><path d="M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/><path d="M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                            <path d="M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z"/>
                            <path d="M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z"/>
                            <path d="M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
                            <path d="M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
                            <path d="M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z"/>
                        </svg>`
        let buttonsDuplicate = [];
        buttonData.filter(buttonInfo => farmToolIDs.includes(buttonInfo.tool)).forEach(buttonInfo => {
            if (!buttonsDuplicate.includes(buttonInfo.tool)) {
                buttonsDuplicate.push(buttonInfo.tool);
                if (buttonInfo.tool === 'Farm-Carrot') {
                    makeNewButton(buttonInfo, svgCarrot);
                } else {
                    makeNewButton(buttonInfo, svgWheat);
                }
            }
        });
    }

    function makeNewButton(buttonInfo, svg="") {
        const button = document.createElement('button');
        button.type = 'button';
        button.id = buttonInfo.tool;
        button.dataset.toolid = buttonInfo.tool;
        button.classList.add('toolbar-btn');
        button.classList.add('panel-btn');

        button.innerHTML = svg;

        button.addEventListener('click', (e) => {
            setActiveTool(e);
        });

        panelLayoutInner.appendChild(button);
        panelLayoutInner.classList.remove('loading-objects')
        loaderButton.classList.remove('active')
    }

    window.setActiveTool = (e) => {
        console.log('tool id', e.target.dataset.toolid)
        getButtonsUnactive(e)
        if(e.target.classList.contains('panel-btn')) {
            getButtonsDisabled()
        }
        toggleModal(e)
        selectedControl = e.currentTarget;
        selectedControl.classList.add('selected');
        window.game.setActiveToolId(e.target.dataset.toolid);
    }
</script>
<footer>
    <a title="crédits" href="/credit.html" >Crédits</a>
    <span>Projet pour le cours de web 3D - Bachelor WEB3</span>
</footer>
</body>
</html>